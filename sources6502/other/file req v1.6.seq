;---------------------------------------;   ÆÉÌÅ ÒÅÑ.  Ö1.6;CODE BY ÍETALLIC/ÔË ÌABOLATORY ÉNC.;                 1997.07.21-22;INFO:;    F1,F3 - PRZESUWANIE OKNA;    F5,F7 ---^;;        D - ZMIANA NR.URZ.;        _ - WYJSCIE Z OKNA BEZ WYBORU;            ZBIORU DO LADOWANIA;        N - NOWY KATALOG DYSKIEDKI;CRSR UP & DOWN - PORUSZANIE SIE;                 PO KATALOGU; >RETURN< - WYBRANIE PROGRAMU DO LADO-;            WANIA !;        V - WERSJA TEGO PROGRAMU;;;LDX #$XX       USTAWIENIE POZYCJI;LDY #$YY       X(0-3) I Y(0-21);               LEWEGO GORNEGO ROGU;               WYWOLANIA OKNA;LDA #%0000000X;;             ^ WAR.0 PRZESUWANIE OKNA;                     FKEY MOZLIWE;               WAR.1 ZABRONIONE;JSR $XX06;;;JSR $XX00  PIERWSZE WYWOLANIE OKNA;           (WCZYTUJE KATALOG);JSR $XX03  NASTEPNE WYWOLANIA OKNA;           (BEZ CZYTANIA KATALOGU,  ..;            WYSWIETLANA JEST ZAWARTOSC;            PAMIECI 'PLACE';JSR $XX09  ZALADOWANIE PAMIECI KATALO-;           GIEM DYSKIETKI.;JSR $XX0C  WYSWIETLENIE SAMEGO OKNA.;;;JAK PROGRAMOWO OBSLUGIWAC?;    JSR $XX00 1WYOLANIE LUB $XX03;              NAST. WYWOLANIA;    TXA;    AND #%10000000;    BEQ DL;    RTS       ;WYJSCIE Z PROGRAMU;              ;NIE ZOSTAL WYBRANY;              ;ZADEN PROGRAM DO 'LOAD';DL  TXA;    AND #%00001111;    TAX       ;USTAWIENIE NR STACJI;;    LDA #0    ;PRZYKLADOWE USTAWIENIA;    LDY #1    ;LADOWAC PO ORG. ADRES;    JSR $FFBA;;    ÕWAGA !  SKOKU JSR $FFBD (UST.;                   NAZWY PRG. DO LOAD;             ÎÉÅ ÔÒÚÅÂÁ ×Ù×ÏÌÙ×ÁÃ !!!;             ÆILE ÒEQ. SAM TO USTAWIA!;    WYSTARCZY NP. WYKONAC:;;    LDA #0   ;LOAD;    LDX #$FF;    LDY #$FF;    JSR $FFD5 I PROGRAM ZALADOWANY;              DO PAMIECI!;£££££££££££££££££££££££££££££££££££££££;JESLI CHCESZ SKONTROLOWAC JAKI TYP PRO-;GRAMU ZOSTAL WYBRANY TO SPRAWC:;.XX29 XX XX XX XX;  NP.  P  R  G  <;;.XX18 16 BAJTOW NAZWY PROGRAMU!;;;;.XX0F  NR URZADZENIA;       LDA $XX0F;       AND #$0F;       I WIESZ CO ZA STACJA DZIALA!;.XX10  ILOSC PLIKOW W KATALOGU;;MOJ ADRES:;    ÔOMASZ 'ÍETALLIC' ËÉÅ\ÂÉÏ×ÓËÉ;               ,;       UL.ÚWOLENSKA 21C/2;         27-300 ÌIPSKO;      TEL. (048)37-82-220; JAKBY KTO NIE WIEDZIAL: ÐÏÌÁÎÄ;---------------------------------------         *= $1000VEC1     = $FBVEC2     = $FDPLACE2   = $F000 ;MOZE BYC OD $D000!                 ;ALE UWAGA NA                 ;ÔURBOASSEMBLER!PLACE    = PLACE2+$0400         JMP START         JMP START1         JMP UOPEN         JMP DIR         JMP WOPENDEVICE   .BYTE 8ILPRG    .BYTE 0KOM      .BYTE 1PAM      .BYTE 0,0XCOM     .BYTE 0YCOM     .BYTE 21ICOM     .BYTE 1         .BYTE 0BUFOR    .TEXT "        "         .TEXT "        "         .TEXT "        "ZAP         SEC         JSR $FFF0         STX PAM         STY PAM+1         LDX #0         LDA #32ZA         STA BUFOR,X         INX         CPX #24         BNE ZA         RTSODPAM         LDX PAM         LDY PAM+1         CLC         JMP $FFF0START         JSR ZAP         JSR UP         JSR GO1GO3         JSR ODPAM         JMP DOWNSTART1         JSR ZAP         JSR UP         JSR GO2         JMP GO3GO1         LDA #$C9         STA $028A         LDA $BA         STA DEVICE         JSR FILL         LDA #1         STA KOM         STA ICOM         JSR WOPEN         JSR DIRGO2         LDA $BA         STA DEVICE         JSR LIST         JSR FDRUK         JSR KUPA         JSR DUPAST1         JSR KEY         CMP #17     ;LINE DOWN         BNE ST2         LDY KOM         CPY ILPRG         BCC H1         JMP ST1H1         CPY #12         BEQ ST1A         INYTY         TYA         PHA         JSR KUPA         PLA         STA KOM         JSR KUPA         JSR DUPA         JMP ST1ST1A         STY KOM         LDA ILPRG         SEC         SBC #12         CMP ICOM         BCC STG         LDX ICOM         INXTY2         STX ICOM         JSR FDRUK         JSR KUPA         JSR DUPA         JMP ST1STG         JMP ST1ST2         CMP #145  ;LINE UP         BNE ST3         LDY KOM         CPY #1         BEQ ST2A         DEY         JMP TYST2A         LDA ICOM         CMP #1         BEQ ST1         TAX         DEX         JMP TY2ST3         CMP #"_"  ;EXIT         BNE ST4         PLA         PLA         LDA DEVICE         EOR #%10000000         STA DEVICE         JMP GO3ST4         CMP #"N"         BNE ST5         JMP STARTST5         CMP #13     ;LOAD         BNE ST6         LDX KOM         DEX         DEX         TXA         ADC ICOM         JSR MNO         LDY #21AST2         JSR CZYTAJ         STA BUFOR-4,Y         INY         CPY #25         BNE AST2         LDY #3AST         JSR CZYTAJ         CMP #34         BEQ AST1         STA BUFOR-3,Y         INY         BNE ASTAST1         TYA         SEC         SBC #3         LDX #<BUFOR         LDY #>BUFOR         JMP $FFBDST6         CMP #"V"         BNE ST7         JSR DVECST6A         JSR KEY         CMP #32         BNE ST6AAAA         JSR LIST         JSR FDRUK         JSR KUPA         JSR DUPA         JMP ST1ST7         CMP #"D"   ;ZMIANA DEVICE         BNE ST8         LDA #0         STA $C6         LDA DEVICE         PHA         JSR DDEVA1         JSR KEY         CMP #"8"         BNE A2A3         AND #$0F         STA DEVICE         LDA DEVICE         JSR SPRDEV         BCS A6         PLA         JMP AAAA6         JSR DEROR         JSR KEY         PLA         STA DEVICE         JMP AAAA2         CMP #"9"         BNE A4         JMP A3A4         CMP #"A"         BNE A5         LDA #$0A         JMP A3A5         CMP #"B"         BNE A1         LDA #$0B         JMP A3ST8         CMP #133         BNE ST9         JSR GOL         LDA XCOM         BEQ A10         TAX         DEXPUMP         STX XCOMPUMP1         LDA #147         JSR $FFD2         JSR DOWN         JMP AAAA10         JMP ST1ST9         CMP #134   ;         BNE ST10         JSR GOL         LDA XCOM         CMP #3         BEQ A10         TAX         INX         JMP PUMPST10         CMP #136         BNE ST11         JSR GOL         LDA YCOM         CMP #21         BEQ A10         TAX         INXPUMP2         STX YCOM         JMP PUMP1ST11         CMP #135         BNE ST12         JSR GOL         LDA YCOM         BEQ A10         TAX         DEX         JMP PUMP2ST12         JMP ST1GOL         LDA #0         BEQ GOL1         PLA         PLA         JMP ST1GOL1         RTSKEY         JSR $FFE4         BEQ KEY         RTSDUPA         LDA XCOM         CLC         ADC #18         TAX         LDY YCOM         INY         CLC         JSR $FFF0         LDA #32         JSR $FFD2         JSR $FFD2         JSR $FFD2         SEC         JSR $FFF0         DEY         DEY         DEY         CLC         JSR $FFF0         LDA KOM         ADC ICOM         TAX         DEX         TXA         JSR MNO         LDY #0         JSR CZYTAJ         TAX         INY         JSR CZYTAJ         JSR $BDCD         LDA XCOM         CLC         ADC #18         TAX         LDA YCOM         CLC         ADC #5         TAY         CLC         JSR $FFF0         LDA #32         JSR $FFD2         JSR $FFD2         JSR $FFD2         JSR $FFD2         SEC         JSR $FFF0         DEY         DEY         DEY         DEY         CLC         JSR $FFF0         LDX #4         LDY #21WL         JSR CZYTAJ         JSR $FFD2         INY         DEX         BNE WL         SEC         JSR $FFF0         LDA YCOM         CLC         ADC #10         TAY         CLC         JSR $FFF0         LDY $D3         LDA #32         STA ($D1),Y         INY         STA ($D1),Y         INY         STA ($D1),Y         LDX ICOM         DEX         TXA         CLC         ADC KOM         TAX         LDA #0         JMP $BDCDKUPA         LDY YCOM         INY         LDA XCOM         CLC         ADC #4         ADC KOM         TAX         CLC         JSR $FFF0         JMP FEORCLOSE         LDA #1         JSR $FFC3         JSR $FFCC         JMP $FDA3         ;----------DIR         LDA #0         STA ILPRG         JSR DIR1         JSR USTVEC         JMP LICZBA         ;-----DIR1         LDX DEVICE         LDY #0         LDA #1         JSR $FFBA         LDA #1         LDX #<TXT1         LDY #>TXT1         JSR $FFBD         LDA #0         STA $DC0E         JSR $FFC0         LDX #1         JSR $FFC6         JSR $FFCF         STA $AE         JSR $FFCF         STA $AF         RTSLICZBA         JSR $FFCF         JSR $FFCF         JSR $FFCF         JSR WSTAW         JSR SPR         BNE KNC         JSR $FFCF         JSR WSTAWGET         JSR SPR         BNE KNC         JSR $FFCF         CMP #34         BNE GET         JSR WSTAWGET1         JSR $FFCF         CMP #34         BEQ GET2         JSR WSTAW         JMP GET1GET2         JSR WSTAWGET3         JSR $FFCF         PHA         JSR WSTAW         PLA         BNE GET3         JSR WSTAW0         INC ILPRG         JMP LICZBAWSTAW         SEI         INC $D020         INC 1         STA ($AE),Y         DEC 1         DEC $D020         INY         BNE WSTAW1WSTAW0         LDY #0         LDA $AE         CLC         ADC #32         STA $AE         LDA $AF         ADC #0         STA $AFWSTAW1         RTSUSTVEC         LDA #>PLACE         LDX #<PLACE         STA $AF         STX $AE         LDY #0         RTSKNC         JSR CLOSE         LDX ILPRG         DEX         STX ILPRG         RTSSPR         LDA $90         AND #$40         BNE KNC1         LDA $91         BPL KNC1         LDA #0         RTSKNC1         LDA #1         RTSTXT1         .TEXT "$"LIST         JSR WOPEN         JSR USTVEC         LDX XCOM         INX         LDY YCOM         INY         CLC         JSR $FFF0         LDY #3LI1         JSR CZYTAJ         JSR $FFD2         INY         CPY #19         BNE LI1         LDX XCOM         INX         INX         INX         LDA YCOM         CLC         ADC #12         TAY         CLC         JSR $FFF0         LDY #21LI2         JSR CZYTAJ         JSR $FFD2         INY         CPY #26         BNE LI2         LDA XCOM         CLC         ADC #18         TAX         LDA YCOM         CLC         ADC #14         TAY         CLC         JSR $FFF0         LDA #0         LDX ILPRG         JSR $BDCD         LDA XCOM         CLC         ADC #3         TAX         LDA YCOM         CLC         ADC #8         TAY         CLC         JSR $FFF0         LDX ILPRG         INX         TXA         JSR MNO         LDY #0         JSR CZYTAJ         TAX         INY         JSR CZYTAJ         JMP $BDCDCZYTAJ         SEI         INC 1         LDA ($AE),Y         DEC 1         CLI         RTS         ;-----------MNO         LDX #32         STA $C3         STX $C4         LDA #0         STA $C1         LDX #8LAAP1         LSR $C4         BCC LAAP2         CLC         ADC $C3LAAP2         ROR A         ROR $C1         DEX         BNE LAAP1         STA $C2         LDA $C1         STA $AE         LDA $C2         ADC #>PLACE         STA $AF         RTS         ;-----------WOPEN         LDA #142         JSR $FFD2         LDX XCOM         LDY YCOM         CLC         JSR $FFF0         LDA DEVICE         AND #$0F         BCC OP         AND #6OP       ADC #$30         STA QQQ+1         LDA #>TXT         LDX #<TXTLA         STA VEC1+1         STX VEC1L0         LDX #18L1         LDY #0         LDA (VEC1),Y         BEQ LEXIT         JSR $FFD2         INC VEC1         BNE L2         INC VEC1+1L2         DEX         BNE L1         SEC         JSR $FFF0         LDY YCOM         INX         CLC         JSR $FFF0         JMP L0LEXIT         RTSUOPEN         AND #1         BEQ UO1         LDA #1         STA GOL+1         JMP UO2UO1         LDA #0         STA GOL+1UO2         STX XCOM         STY YCOM         RTSDVEC         LDA XCOM         CLC         ADC #4         TAX         LDY YCOM         CLC         JSR $FFF0         LDA #>TXT4         LDX #<TXT4         JMP LADDEV         LDA #12         STA L0+1         LDA XCOM         CLC         ADC #13         TAX         LDY YCOM         CLC         JSR $FFF0         LDA #>TXT5         LDX #<TXT5         JSR LA         LDA #18         STA L0+1         RTSDEROR         LDA XCOM         CLC         ADC #18         TAX         LDY YCOM         CLC         JSR $FFF0         LDA #>TXT6         LDX #<TXT6         JMP LATXT4         .TEXT "«ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ³"         .TEXT "Â FILE REQ V1.6  Â"         .TEXT "ÂCODE BY METALLICÂ"         .TEXT "Â TK LABOLATORY  Â"         .TEXT "Â     1997       Â"         .TEXT "Â                Â"         .TEXT "Â  PRESS SPACE   Â"         .TEXT "«ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ³"         .BYTE 0TXT5         .TEXT "«ÃÃÃÃÃÃÃÃÃÃ®"         .TEXT "Â  DEVICE  Â"         .TEXT "Â°ÃÃÃ®°ÃÃÃ®Â"         .TEXT "ÂÂ 8 ÂÂ 9 ÂÂ"         .TEXT "Â­ÃÃÃ½­ÃÃÃ½Â"         .TEXT "Â°ÃÃÃ®°ÃÃÃ®Â"         .TEXT "ÂÂ A ÂÂ B ÂÂ"         .TEXT "Â­ÃÃÃ½­ÃÃÃ½Â"         .TEXT "­ÃÃÃÃÃÃÃÃÃÃ±"         .BYTE 0TXT6         .TEXT "°ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ®"         .TEXT "ÂDEVICE NOT HERE!Â"         .TEXT "­ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ½"         .BYTE 0TXT         .TEXT "°ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ®"         .TEXT "Â                Â"         .TEXT "«ÃÃÃÃÃÃÃÃÃÃ²ÃÃÃÃÃ³"         .TEXT "ÂFREE:     Â     Â"         .TEXT "«ÃÃÃÃÃÃÃÃÃÃ±ÃÃÃÃÃ³"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "Â                Â"         .TEXT "«ÃÃÃ²ÃÃÃÃ²ÃÃÃ²ÃÃÃ³"         .TEXT "Â   Â    Â   Â   Â"         .TEXT "«Ã²Ã±²ÃÃ²±ÃÃÃÛÃÃÃ³"QQQ      .TEXT "Â Â<-Â->ÂLOADÂNEWÂ"         .TEXT "­Ã±ÃÃ±ÃÃ±ÃÃÃÃ±ÃÃÃ½"         .BYTE 0FDRUK         LDY YCOM         INY         LDA XCOM         CLC         ADC #5         TAX         CLC         JSR $FFF0         LDA ICOM         JSR MNO         LDX #12         STX KDS+1KDA         LDX #16KDE         LDA #32         JSR $FFD2         DEX         BNE KDE         SEC         JSR $FFF0         TYA         SEC         SBC #16         TAY         CLC         JSR $FFF0         JSR KD0         LDA #13         JSR $FFD2         SEC         JSR $FFF0         LDY YCOM         INY         CLC         JSR $FFF0         LDA $AE         CLC         ADC #32         STA $AE         LDA $AF         ADC #0         STA $AFKDS      LDX #0         DEX         STX KDS+1         BNE KDA         RTSKD0         LDY #3KD1         JSR CZYTAJ         BEQ TK1         CMP #34         BEQ KD2         JSR $FFD2         INY         BNE KD1KD2         RTSTK1         PLA         PLA         RTSFEOR         LDX #16         LDY $D3FE         LDA ($D1),Y         EOR #$80         STA ($D1),Y         INY         DEX         BNE FE         RTSSPRDEV         LDX #0         STX $90         JSR $FFB1         LDA #$6F         JSR $FF93         BIT $90         BMI JP1         JSR $FFAE         CLC         RTSJP1      SEC         RTSFILL         SEI         LDX #0         INC 1FI         LDA #0         STA PLACE,X         STA PLACE+256,X         STA PLACE+512,X         INX         BNE FI         DEC 1         CLI         RTSUP0         LDA $0288         LDX #$00         STA VEC1+1         STX VEC1         LDA #>PLACE2         LDX #<PLACE2         STA VEC2+1         STX VEC2         RTSUP         JSR UP0         SEI         LDX #0         LDY #0UP1         LDA (VEC1),Y         INC 1         STA (VEC2),Y         DEC 1         INC VEC1         INC VEC2         BNE UP2         INC VEC1+1         INC VEC2+1         INXUP2      CPX #4         BNE UP1         CLI         RTSDOWN         JSR UP0         SEI         LDX #0         LDY #0DO1         INC 1         LDA (VEC2),Y         DEC 1         STA (VEC1),Y         INC VEC2         INC VEC1         BNE DO2         INC VEC1+1         INC VEC2+1         INXDO2      CPX #4         BNE DO1         CLI         LDX DEVICE         RTS